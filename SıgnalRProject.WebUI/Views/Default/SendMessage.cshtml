@model CreateMessageDto

<section class="book_section layout_padding">
    <div class="container">
        <div class="heading_container">
            <h2>
                Bize Ulaşın
            </h2>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form_container">
                    <form method="post" asp-action="SendMessage" asp-controller="Default">
                        <div>
                            <input type="text" class="form-control" id="namesurname" placeholder="Adınız Soyadınız" asp-for="NameSurname" />
                        </div>
                        <div>
                            <input type="text" class="form-control" id="phone" placeholder="Telefon Numaranız" asp-for="Phone" />
                        </div>
                        <div>
                            <input type="mail" class="form-control" id="mail" placeholder="Email Adresiniz" asp-for="Mail" />
                        </div>
                        <div>
                            <input type="text" class="form-control" id="subject" placeholder="Konu" asp-for="Subject" />
                        </div>
                        <div>
                            <textarea asp-for="MessageContent" rows="10" cols="3" id="messagecontent" placeholder="Buraya mesajınızı yazabilirsiniz..." class="form-control"></textarea>
                        </div>

                        <div class="btn_box">
                            <button id="sendEmailButton">
                                Mesajı Gönder
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-6">
                <div class="map_container ">
                    <div id="googleMap"></div>
                </div>
            </div>
        </div>
    </div>
</section>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
        $("#sendEmailButton").click(function (e) {
            e.preventDefault();

            var formData = {
                NameSurname: $("#namesurname").val(),
                Phone: $("#phone").val(),
                Mail: $("#mail").val(),
                Subject: $("#subject").val(),
                MessageContent: $("#messagecontent").val()
            };
            $.ajax({
                url: "https://localhost:7024/api/Message",
                type: "POST",
                data: formData,
                success: function (result) {
                    if (result.success) {
                        alert("E-posta başarıyla gönderildi!");
                        $("#namesurname, #mail,#phone, #subject, #messagecontent").val("");
                    } else {
                        alert("E-posta gönderme işlemi başarısız oldu: " + result.message);
                    }
                },
                error: function (error) {
                    alert("İşlem Başarısız Olmuştur");
                }
            });
        });
    });


</script>